# Cognee MCP Server - Environment Configuration
# Copy this file to .env and configure for your environment

# ================================
# Required Configuration
# ================================

# Cognee API server URL (REQUIRED)
# This is the backend API that MCP server connects to
API_URL=http://cognee:8000
# For local development: API_URL=http://localhost:8000
# For Docker: API_URL=http://cognee:8000
# For external: API_URL=https://api.cognee.example.com

# ================================
# Authentication
# ================================

# API authentication token (OPTIONAL but recommended)
API_TOKEN=

# Backend access control (RECOMMENDED for multi-user)
ENABLE_BACKEND_ACCESS_CONTROL=true

# ================================
# Transport Configuration
# ================================

# Transport mode: stdio, sse, http
TRANSPORT_MODE=sse

# HTTP server port (for SSE/HTTP transports)
HTTP_PORT=8001

# MCP endpoint path (HTTP transport only)
MCP_PATH=/mcp

# ================================
# CORS Configuration
# ================================

# Allowed origins for CORS (comma-separated)
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080

# ================================
# Logging
# ================================

# Log level: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO
MCP_LOG_LEVEL=INFO

# ================================
# Environment
# ================================

# Environment: production, local, dev
ENVIRONMENT=production

# Enable debug mode (true/false)
DEBUG=false

# Debug port (when DEBUG=true)
DEBUG_PORT=5678

# ================================
# Optional Features
# ================================

# Extra Python dependencies to install
# Example: EXTRAS=gemini,huggingface
EXTRAS=

# ================================
# Docker-specific Configuration
# ================================

# Docker Compose service name prefix
COMPOSE_PROJECT_NAME=cognee

# MCP server version tag
COGNEE_MCP_VERSION=latest

# ================================
# Resource Limits (Docker Compose)
# ================================

# CPU limit (number of cores)
MCP_CPU_LIMIT=1.0

# Memory limit (e.g., 2G, 2048M)
MCP_MEMORY_LIMIT=2G

# ================================
# Network Configuration
# ================================

# Docker network name
COGNEE_NETWORK=cognee-network

# External MCP port mapping
MCP_HTTP_PORT=8001
MCP_DEBUG_PORT=5679

# ================================
# Advanced Configuration
# ================================

# Python-specific
PYTHONUNBUFFERED=1
PYTHONDONTWRITEBYTECODE=1

# UV package manager
UV_COMPILE_BYTECODE=1
UV_LINK_MODE=copy

# ================================
# Database Configuration (Direct Mode Only)
# ================================
# Note: Not needed when using API mode (API_URL is set)

# Database provider: sqlite, postgres
DB_PROVIDER=sqlite

# PostgreSQL configuration (if DB_PROVIDER=postgres)
DB_HOST=postgres
DB_PORT=5432
DB_NAME=cognee_db
DB_USERNAME=cognee
DB_PASSWORD=cognee

# Vector database provider: lancedb, qdrant, weaviate
VECTOR_DB_PROVIDER=lancedb

# Graph database provider: kuzu, neo4j
GRAPH_DATABASE_PROVIDER=kuzu

# ================================
# Security
# ================================

# Allow HTTP requests (not recommended for production)
ALLOW_HTTP_REQUESTS=false

# Allow Cypher queries (security consideration)
ALLOW_CYPHER_QUERY=false

# ================================
# LibreChat Integration
# ================================

# If integrating with LibreChat, add these to LibreChat's .env:
# COGNEE_MCP_URL=http://cognee-mcp:8001/mcp
# COGNEE_MCP_TOKEN=<same as API_TOKEN above>

# ================================
# Notes
# ================================

# 1. API Mode (Recommended):
#    - Set API_URL to point to running Cognee API server
#    - MCP server is read-only and stateless
#    - No database configuration needed
#    - Scales horizontally

# 2. Direct Mode (Not recommended for MCP):
#    - Don't set API_URL
#    - Requires database configuration
#    - Not suitable for production MCP deployments

# 3. Transport Modes:
#    - stdio: CLI/terminal integration
#    - sse: Server-Sent Events (LibreChat, web clients)
#    - http: REST API, polling-based clients

# 4. Multi-user Isolation:
#    - Set ENABLE_BACKEND_ACCESS_CONTROL=true
#    - Configure on backend API as well
#    - Each user sees only their datasets

# 5. Port Configuration:
#    - MCP uses 8001 to avoid conflict with API (8000)
#    - Debug port 5679 to avoid conflict with API debug (5678)
#    - Adjust if needed for your environment
